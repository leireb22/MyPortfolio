// Sistema de internacionalización (i18n)
const i18n = {
    es: {
        // Título de la página
        'Leire Batalla - Portafolio': 'Leire Batalla - Portfolio',
        
        // Navegación
        'Inicio': 'Inicio',
        'Datos personales': 'Datos personales',
        'Formación': 'Formación',
        'Experiencia': 'Experiencia',
        'Habilidades': 'Habilidades',
        'Contacto': 'Contacto',
        'Desarrolladora Web': 'Desarrolladora Web',
        'Proyectos': 'Proyectos',
        
        // Sección de inicio
        '¡Hola, soy Leire Batalla!': '¡Hola, soy Leire Batalla!',
        'Estudiante de desarrollo web y móvil con mente creativa y pasión por el código. Combino tecnología y diseño para crear soluciones funcionales y visuales.': 'Estudiante de desarrollo web y móvil con mente creativa y pasión por el código. Combino tecnología y diseño para crear soluciones funcionales y visuales.',
        'Proyectos': 'Proyectos',
        
        // Sección de datos personales
        'Datos Personales': 'Datos Personales',
        'Nombre completo:': 'Nombre completo:',
        'Leire Antón Batalla': 'Leire Antón Batalla',
        'Fecha de nacimiento:': 'Fecha de nacimiento:',
        '17 de diciembre de 2004': '17 de diciembre de 2004',
        'Nacionalidad:': 'Nacionalidad:',
        'Española': 'Española',
        'Dirección:': 'Dirección:',
        'C/ Los Robles 30, Sahagún, León (CP 24320)': 'C/ Los Robles 30, Sahagún, León (CP 24320)',
        'Teléfono:': 'Teléfono:',
        'Correo electrónico:': 'Correo electrónico:',
        'Idiomas:': 'Idiomas:',
        'Español (nativo), Inglés (fluido)': 'Español (nativo), Inglés (fluido)',
        'CV en Español': 'CV en Español',
        'CV in English': 'CV in English',
        
        // Sección de formación
        'Formación Académica': 'Formación Académica',
        'Desarrollo de Aplicaciones Web': 'Desarrollo de Aplicaciones Web',
        '2024 - Actualidad (2 años)': '2024 - Actualidad (2 años)',
        'Bachillerato de Artes': 'Bachillerato de Artes',
        '2020 - 2022 (2 años)': '2020 - 2022 (2 años)',
        'IES San Andrés, León': 'IES San Andrés, León',
        'Escuela de Arte y Superior de Conservación, León': 'Escuela de Arte y Superior de Conservación, León',
        
        // Sección de experiencia
        'Experiencia Laboral': 'Experiencia Laboral',
        'aaaa': 'aaaa',
        
        // Sección de habilidades
        'Habilidades y Competencias': 'Habilidades y Competencias',
        'Habilidades Técnicas': 'Habilidades Técnicas',
        'Lenguajes:': 'Lenguajes:',
        'JavaScript, HTML, CSS, Java, C#, SQL': 'JavaScript, HTML, CSS, Java, C#, SQL',
        'Herramientas y Entornos:': 'Herramientas y Entornos:',
        'Velneo, XAMPP, Apache, Git/GitHub, Visual Studio Code': 'Velneo, XAMPP, Apache, Git/GitHub, Visual Studio Code',
        'Bases de datos:': 'Bases de datos:',
        'MySQL': 'MySQL',
        'Diseño:': 'Diseño:',
        'Diseño gráfico y digital, fundamentos de UX/UI': 'Diseño gráfico y digital, fundamentos de UX/UI',
        'Otros:': 'Otros:',
        'Responsive Web Design, maquetación web, lenguajes de marcas (HTML, XML)': 'Responsive Web Design, maquetación web, lenguajes de marcas (HTML, XML)',
        'Habilidades Personales': 'Habilidades Personales',
        'Aprendizaje rápido y autodidacta': 'Aprendizaje rápido y autodidacta',
        'Creatividad y sensibilidad estética': 'Creatividad y sensibilidad estética',
        'Resolución de problemas': 'Resolución de problemas',
        'Trabajo en equipo': 'Trabajo en equipo',
        'Organización y responsabilidad': 'Organización y responsabilidad',
        'Atención al detalle': 'Atención al detalle',
        'Comunicación eficaz': 'Comunicación eficaz',
        'Idiomas': 'Idiomas',
        'Cursos': 'Cursos',
        'Fundamentos de Linux': 'Fundamentos de Linux',
        'Linux Essentials - Cisco Networking Academy': 'Linux Essentials - Cisco Networking Academy',
        'Ver certificado': 'Ver certificado',
        
        // Contacto
        'Contacto': 'Contacto',
        'Sahagún, León, España': 'Sahagún, León, España',
        'LinkedIn': 'LinkedIn',
        'GitHub': 'GitHub',
        'Estoy abierta a oportunidades de aprendizaje, colaboración y crecimiento profesional.': 'Estoy abierta a oportunidades de aprendizaje, colaboración y crecimiento profesional.'
    },

    
    en: {
        // Navigation
        'Inicio': 'Home',
        'Datos personales': 'Personal Data',
        'Formación': 'Education',
        'Experiencia': 'Experience',
        'Habilidades': 'Skills',
        'Proyectos': 'Projects',
        'Contacto': 'Contact',
        'Desarrolladora Web': 'Web Developer',
        
        
        // Hero section
        '¡Hola, soy Leire Batalla!': 'Hi, I\'m Leire Batalla!',
        'Estudiante de desarrollo web y móvil con mente creativa y pasión por el código. Combino tecnología y diseño para crear soluciones funcionales y visuales.': 'Web and mobile development student with a creative mind and passion for code. I combine technology and design to create functional and visual solutions.',
        
        // Personal Data
        'Datos Personales': 'Personal Data',
        'Nombre completo:': 'Full name:',
        'Leire Antón Batalla': 'Leire Antón Batalla',
        'Fecha de nacimiento:': 'Date of birth:',
        '17 de diciembre de 2004': '17th December, 2004',
        'Nacionalidad:': 'Nationality:',
        'Española': 'Spanish',
        'Dirección:': 'Address:',
        'C/ Los Robles 30, Sahagún, León (CP 24320)': '30 Los Robles, Sahagún, León (CP 24320)',
        'Teléfono:': 'Phone:',
        'Correo electrónico:': 'Email:',
        'Idiomas:': 'Languages:',
        'Español (nativo), Inglés (fluido)': 'Spanish (native), English (fluent)',
        'CV en Español': 'CV in Spanish',
        'CV in English': 'CV in English',
        
        // Sección de formación
        'Formación Académica': 'Academic Education',
        'Desarrollo de Aplicaciones Multiplataforma': 'Multiplatform Application Development',
        '2024 - Actualidad (2 años)': '2024 - Present (2 years)',
        'Bachillerato de Artes': 'Arts High School',
        '2020 - 2022 (2 años)': '2020 - 2022 (2 years)',
        'IES San Andrés, León': 'IES San Andrés, León',
        'Escuela de Arte y Superior de Conservación, León': 'School of Art and Higher Conservation, León',
        
        // Sección de experiencia
        'Experiencia Laboral': 'Work Experience',
        'Prácticas de Desarrollo de Aplicaciones Web': 'Web Application Development Internship',
        '2024 / 2025 - 1º Curso DAW': '2024 / 2025 - 1st Year DAW',
        'Durante mi primer año de Desarrollo de Aplicaciones Web, he realizado diversos proyectos que demuestran mis habilidades técnicas y creativas. Puedes ver algunos de estos trabajos en la sección de Proyectos de este portafolio, donde he aplicado mis conocimientos en programación, diseño de interfaces y desarrollo web.': 'During my first year of Web Application Development, I have completed various projects that demonstrate my technical and creative skills. You can see some of these works in the Projects section of this portfolio, where I have applied my knowledge in programming, interface design, and web development.',
        'Experiencia en Hostelería': 'Hospitality Experience',
        'Varios periodos': 'Various periods',
        'Amplia experiencia en atención al público en el sector de la hostelería, donde he desarrollado habilidades clave como:': 'Extensive experience in customer service in the hospitality sector, where I have developed key skills such as:',
        'Excelente trato al cliente y comunicación efectiva': 'Excellent customer service and effective communication',
        'Capacidad para trabajar bajo presión en entornos dinámicos': 'Ability to work under pressure in dynamic environments',
        'Trabajo en equipo y coordinación con compañeros': 'Teamwork and coordination with colleagues',
        'Resolución de problemas y gestión de imprevistos': 'Problem-solving and unexpected situation management',
        'Adaptabilidad a diferentes situaciones y necesidades del cliente': 'Adaptability to different situations and customer needs',
        'Orientación a resultados con enfoque en la satisfacción del cliente': 'Results-oriented with a focus on customer satisfaction',
        'Esta experiencia me ha permitido desarrollar una actitud proactiva, capacidad de aprendizaje rápido y una gran capacidad de adaptación a diferentes entornos laborales, habilidades que aplico en mi desarrollo profesional en el ámbito tecnológico.': 'This experience has allowed me to develop a proactive attitude, quick learning ability, and great adaptability to different work environments, skills that I apply in my professional development in the technological field.',
        
        // Sección de habilidades
        'Habilidades y Competencias': 'Skills and Competencies',
        'Habilidades Técnicas': 'Technical Skills',
        'Lenguajes:': 'Languages:',
        'JavaScript, HTML, CSS, Java, C#, SQL': 'JavaScript, HTML, CSS, Java, C#, SQL',
        'Herramientas y Entornos:': 'Tools and Environments:',
        'Velneo, XAMPP, Apache, Git/GitHub, Visual Studio Code': 'Velneo, XAMPP, Apache, Git/GitHub, Visual Studio Code',
        'Bases de datos:': 'Databases:',
        'MySQL': 'MySQL',
        'Diseño:': 'Design:',
        'Diseño gráfico y digital, fundamentos de UX/UI': 'Graphic and digital design, UX/UI fundamentals',
        'Otros:': 'Other:',
        'Responsive Web Design, maquetación web, lenguajes de marcas (HTML, XML)': 'Responsive Web Design, web layout, markup languages (HTML, XML)',
        'Habilidades Personales': 'Personal Skills',
        'Aprendizaje rápido y autodidacta': 'Quick and self-taught learning',
        'Creatividad y sensibilidad estética': 'Creativity and aesthetic sensitivity',
        'Resolución de problemas': 'Problem solving',
        'Trabajo en equipo': 'Teamwork',
        'Organización y responsabilidad': 'Organization and responsibility',
        'Atención al detalle': 'Attention to detail',
        'Comunicación eficaz': 'Effective communication',
        'Idiomas': 'Languages',
        'Cursos': 'Courses',
        'Fundamentos de Linux': 'Linux Fundamentals',
        'Linux Essentials - Cisco Networking Academy': 'Linux Essentials - Cisco Networking Academy',
        'Ver certificado': 'View certificate',
        
        // Sección de contacto
        'leirebatalla@gmail.com': 'leirebatalla@gmail.com',
        '+34 608 505 017': '+34 608 505 017',
        'Sahagún, León (España)': 'Sahagún, León (Spain)',
        'Estoy abierta a oportunidades de aprendizaje, colaboración y crecimiento profesional.': 'I am open to learning, collaboration, and professional growth opportunities.',
        
        // Página de Proyectos
        'Mis Proyectos': 'My Projects',
        'Aquí puedes ver algunos de mis proyectos.': 'Here you can see some of my projects.',
        'Ver Proyecto': 'View Project',
        'Más Información': 'More Info',
        
        // Página de Detalles del Proyecto
        'Volver a Proyectos': 'Back to Projects',
        'Fecha': 'Date',
        'Tecnologías': 'Technologies',
        'Descripción': 'Description',
        'Características': 'Features',
        'Características principales': 'Main Features',
        'Ver Demo': 'View Demo',
        'Código Fuente': 'Source Code',
        'Juego de memoria': 'Memory game',
        'Calculadora de IP': 'IP Calculator',
        'Maps con API': 'Maps with API',
        'Cómo jugar': 'How to Play',
        'Cómo usar': 'How to Use',
        'Explicación del Código': 'Code Explanation',
        
        // Memorion
        'Memorion': 'Memorion',
        'Juego de memoria de cartas basado en web, con ajustes de juego personalizables, temas y un sistema de clasificación.': 'Web-based memory card game, with customizable game settings, themes and a ranking system.',
        'Formulario de configuración personalizable': 'Customizable configuration form',
        'Múltiples modos de juego: Normal y Flash': 'Multiple game modes: Normal and Flash',
        'Tipos de tablero: Predeterminado (4x4, 5x4, 6x6) y personalizado': 'Board types: Default (4x4, 5x4, 6x6) and custom',
        'Cinco temas diferentes: Scooby-Doo, Comida, Deportes, Banderas y opción Aleatoria': 'Five different themes: Scooby-Doo, Food, Sports, Flags and Random option',
        'Temporizador opcional': 'Optional timer',
        'Sistema de clasificación con almacenamiento local': 'Ranking system with local storage',
        'Compartir resultados en Facebook': 'Share results on Facebook',
        'Soporte multidispositivo y diseño responsivo': 'Multi-device support and responsive design',
        '1. Configura el juego con tus preferencias': '1. Set up the game with your preferences',
        '2. Haz clic en dos cartas para encontrar coincidencias': '2. Click on two cards to find matches',
        '3. Encuentra todos los pares para ganar': '3. Find all pairs to win',
        '4. Revisa tu posición en el ranking': '4. Check your position in the ranking',
        '5. ¡Comparte tus resultados en redes sociales!': '5. Share your results on social networks!',
        'Abril 2025': 'April 2025',
        'HTML5, CSS3, JavaScript, LocalStorage': 'HTML5, CSS3, JavaScript, LocalStorage',
        
        // Calculadora IP
        'Calculadora IP': 'IP Calculator',
        'Calculadora de subredes IP que permite a los usuarios calcular información de red como direcciones de red, direcciones de broadcast, máscara de subred y más.': 'IP subnet calculator that allows users to calculate network information such as network addresses, broadcast addresses, subnet mask and more.',
        'Cálculo de direcciones de red y broadcast': 'Calculation of network and broadcast addresses',
        'Determinación de la máscara de subred': 'Subnet mask determination',
        'Cálculo del número de hosts disponibles': 'Calculation of available hosts',
        'Visualización del rango de direcciones IP': 'Display of IP address range',
        'Interfaz intuitiva y fácil de usar': 'Intuitive and easy-to-use interface',
        'Diseño responsivo que funciona en diferentes dispositivos': 'Responsive design that works on different devices',
        'Validación de entrada para direcciones IP y prefijos de red': 'Input validation for IP addresses and network prefixes',
        'Resultados claros y fáciles de entender': 'Clear and easy to understand results',
        'Ingresa una dirección IP en el campo correspondiente': 'Enter an IP address in the corresponding field',
        'Selecciona el prefijo de red o ingresa una máscara de subred': 'Select the network prefix or enter a subnet mask',
        'Haz clic en el botón "Calcular"': 'Click the "Calculate" button',
        'Revisa los resultados que incluyen dirección de red, broadcast, máscara y más': 'Review the results which include network address, broadcast, mask and more',
        'Utiliza el botón para reiniciar el formulario': 'Use the button to reset the form',
        'La aplicación validará automáticamente los datos ingresados': 'The application will automatically validate the entered data',
        'Los resultados se mostrarán en formato decimal punteado y binario para mejor comprensión': 'Results will be displayed in dotted decimal and binary format for better understanding',
        'Puedes copiar los resultados haciendo clic en los botones de copia': 'You can copy the results by clicking the copy buttons',
        'Marzo 2025': 'March 2025',
        'HTML, CSS, JavaScript': 'HTML, CSS, JavaScript',
        
        // Google Maps
        'Google Maps API': 'Google Maps API',
        'Aplicación web que muestra un mapa interactivo utilizando la API de Google Maps, permitiendo visualizar ubicaciones específicas y ofreciendo funcionalidades de interacción.': 'Web application that displays an interactive map using the Google Maps API, allowing you to view specific locations and offering interaction features.',
        'Visualización de mapas interactivos': 'Interactive map display',
        'Centrado en ubicaciones específicas': 'Centered on specific locations',
        'Controles de zoom y navegación': 'Zoom and navigation controls',
        'Posibilidad de añadir marcadores personalizados': 'Ability to add custom markers',
        'Interfaz limpia y fácil de usar': 'Clean and easy-to-use interface',
        'Personalización de estilos de mapa': 'Map style customization',
        'Integración con servicios de geolocalización': 'Integration with geolocation services',
        'Búsqueda de ubicaciones con autocompletado': 'Location search with autocomplete',
        'Marcadores personalizados en el mapa': 'Custom markers on the map',
        'Información detallada de ubicaciones': 'Detailed location information',
        'Geolocalización del usuario': 'User geolocation',
        'Abre la aplicación en tu navegador web': 'Open the application in your web browser',
        'El mapa se cargará mostrando la ubicación predeterminada': 'The map will load showing the default location',
        'Usa los controles de zoom para acercar o alejar la vista': 'Use the zoom controls to zoom in or out',
        'Haz clic y arrastra para moverte por el mapa': 'Click and drag to move around the map',
        'Los marcadores indican puntos de interés específicos': 'Markers indicate specific points of interest',
        'Haz clic en un marcador para ver más información': 'Click on a marker to see more information',
        'Utiliza la barra de búsqueda (si está disponible) para buscar ubicaciones': 'Use the search bar (if available) to search for locations',
        'La aplicación es completamente responsiva y se adapta a diferentes tamaños de pantalla': 'The application is fully responsive and adapts to different screen sizes',
        '1. Abre la aplicación en tu navegador': '1. Open the application in your browser',
        '2. Usa la barra de búsqueda para encontrar una ubicación': '2. Use the search bar to find a location',
        '3. Haz clic en cualquier punto del mapa para agregar un marcador': '3. Click anywhere on the map to add a marker',
        '4. Haz clic en un marcador para ver más información': '4. Click on a marker to see more information',
        '5. Usa los controles del mapa para hacer zoom y moverte': '5. Use the map controls to zoom and move',
        'Mayo 2025': 'May 2025',
        'Mayo 2024': 'May 2024',
        'HTML5, CSS3, JavaScript, Google Maps API': 'HTML5, CSS3, JavaScript, Google Maps API',
        
        // Secciones de Explicación del Código
        'Tecnologías utilizadas': 'Technologies Used',
        'Características clave': 'Key Features',
        'Funcionalidades clave': 'Key Functionalities',
        'Estructura del Proyecto': 'Project Structure',
        'Función Principal': 'Main Function',
        'Detalles técnicos': 'Technical Details',
        'Resumen del funcionamiento': 'Operation Summary',
        'Ver Demo': 'View Demo',
        'Ver Código': 'View Code',
        'Ver en GitHub': 'View on GitHub',
        
        // Tecnologías para Calculadora IP
        'HTML: Estructura de la interfaz de la calculadora.': 'HTML: Structure of the calculator interface.',
        'CSS: Estilos visuales y diseño responsivo.': 'CSS: Visual styles and responsive design.',
        'JavaScript: Lógica de la calculadora y manejo de eventos.': 'JavaScript: Calculator logic and event handling.',
        'Interfaz intuitiva y fácil de usar': 'Intuitive and easy-to-use interface',
        'Soporte para operaciones matemáticas básicas': 'Support for basic mathematical operations',
        'Código limpio y bien organizado': 'Clean and well-organized code',
        
        // Tecnologías para Memorion
        'HTML: Estructura la página y los elementos del juego (tablero, cartas, contadores).': 'HTML: Structures the page and game elements (board, cards, counters).',
        'CSS: Define el estilo visual del juego (diseño, colores, animaciones).': 'CSS: Defines the visual style of the game (design, colors, animations).',
        'JavaScript: Implementa la lógica del juego (creación del tablero, volteo de cartas, comparación, control del tiempo y movimientos, detección de victoria).': 'JavaScript: Implements the game logic (board creation, card flipping, comparison, time and move control, victory detection).',
        'HTML: Estructura del tablero y controles': 'HTML: Board structure and controls',
        'CSS: Estilos visuales y animaciones': 'CSS: Visual styles and animations',
        'JavaScript: Lógica del juego y manejo de eventos': 'JavaScript: Game logic and event handling',
        'Generación dinámica del tablero de juego.': 'Dynamic generation of the game board.',
        'Manejo de eventos de clic para voltear las cartas.': 'Click event handling to flip cards.',
        'Lógica para comparar las cartas y determinar si coinciden.': 'Logic to compare cards and determine if they match.',
        'Contador de movimientos y temporizador.': 'Move counter and timer.',
        'Detección de la condición de victoria.': 'Detection of the victory condition.',
        
        // Características de las tarjetas
        'Características': 'Features',
        'Tecnologías': 'Technologies',
        'Configuración personalizable': 'Customizable configuration',
        'Diferentes niveles de dificultad': 'Different difficulty levels',
        'Sistema de puntuación': 'Scoring system',
        'Diseño responsivo': 'Responsive design',
        'Cálculo de direcciones de red': 'Network address calculation',
        'Validación de direcciones IP': 'IP address validation',
        'Conversión entre formatos': 'Format conversion',
        'Búsqueda de ubicaciones': 'Location search',
        'Marcadores personalizados': 'Custom markers',
        'Ventanas de información': 'Information windows',
        
        // Tecnologías en las tarjetas
        'Google Maps JavaScript API': 'Google Maps JavaScript API',
        'Sin dependencias externas': 'No external dependencies',
        
        // Descripciones técnicas para Google Maps
        'index.html: Contiene la estructura básica de la página web y la referencia a la API de Google Maps.': 'index.html: Contains the basic structure of the web page and the reference to the Google Maps API.',
        'style.css: Define el estilo visual del mapa y la página web.': 'style.css: Defines the visual style of the map and web page.',
        'script.js: Contiene la lógica para inicializar y configurar el mapa.': 'script.js: Contains the logic to initialize and configure the map.',
        'initMap(): Función que se encarga de crear y configurar el mapa.': 'initMap(): Function responsible for creating and configuring the map.',
        'Crea un nuevo objeto google.maps.Map asociado al elemento HTML.': 'Creates a new google.maps.Map object associated with the HTML element.',
        'Configura las opciones del mapa.': 'Configures the map options.',
        'Puede añadir marcadores personalizados.': 'Can add custom markers.',
        'Maneja eventos de interacción del usuario.': 'Handles user interaction events.',
        
        // Descripciones técnicas para Calculadora IP
        'HTML: Formulario de entrada y área de resultados': 'HTML: Input form and results area',
        'CSS: Estilos de la interfaz y diseño responsivo': 'CSS: Interface styles and responsive design',
        'JavaScript: Lógica de cálculo y validación': 'JavaScript: Calculation and validation logic',
        'HTML: Contenedor del mapa y controles de interfaz': 'HTML: Map container and interface controls',
        'CSS: Estilos del mapa y elementos interactivos': 'CSS: Map styles and interactive elements',
        'JavaScript: Lógica de interacción con la API de Google Maps': 'JavaScript: Logic for interacting with the Google Maps API',
        
        // Párrafos con código
        'initMap(): Función que se encarga de crear y configurar el mapa.': 'initMap(): Function responsible for creating and configuring the map.'
    }
};

// Función para traducir el texto
function translateText(text) {
    return i18n[currentLanguage]?.[text] || text;
}

// Función para cambiar el idioma
function changeLanguage(lang) {
    if (lang === currentLanguage) return; // No hacer nada si es el mismo idioma
    
    currentLanguage = lang;
    
    // Actualizar el atributo lang del elemento html
    document.documentElement.lang = currentLanguage;
    
    // Actualizar los textos de la página
    updateTexts();
    
    // Actualizar el contenido dinámico si estamos en la página de detalles del proyecto
    if (typeof updateProjectDynamicContent === 'function') {
        updateProjectDynamicContent();
    }
    
    // Guardar la preferencia de idioma en localStorage
    localStorage.setItem('preferredLanguage', currentLanguage);
}

// Variable global para el idioma actual
let currentLanguage = 'es';

// Función para actualizar los textos en la página
function updateTexts() {
    // Actualizar los textos de los elementos con atributos data-i18n
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        const translation = translateText(key);
        
        // Si el elemento es un input o textarea, actualizar el placeholder o value según corresponda
        if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
            if (element.hasAttribute('placeholder')) {
                element.placeholder = translation;
            } else {
                element.value = translation;
            }
        } else {
            // Para otros elementos, actualizar el textContent
            element.textContent = translation;
        }
    });
    
    // Actualizar los atributos title y alt
    document.querySelectorAll('[data-i18n-title]').forEach(element => {
        const key = element.getAttribute('data-i18n-title');
        element.title = translateText(key);
    });
    
    document.querySelectorAll('[data-i18n-alt]').forEach(element => {
        const key = element.getAttribute('data-i18n-alt');
        element.alt = translateText(key);
    });
}

// Función para inicializar los botones de idioma
function initLanguageButtons() {
    const langButtons = document.querySelectorAll('.language-toggle, .lang-toggle');
    
    langButtons.forEach(button => {
        // Remover cualquier manejador de eventos anterior
        const newButton = button.cloneNode(true);
        button.parentNode.replaceChild(newButton, button);
        
        // Agregar nuevo manejador de eventos
        newButton.addEventListener('click', function(e) {
            e.preventDefault();
            const newLang = currentLanguage === 'es' ? 'en' : 'es';
            changeLanguage(newLang);
        });
    });
}

// Inicializar cuando el DOM esté completamente cargado
document.addEventListener('DOMContentLoaded', function() {
    // Cargar el idioma guardado o usar el predeterminado
    const savedLanguage = localStorage.getItem('preferredLanguage');
    if (savedLanguage) {
        currentLanguage = savedLanguage;
    }
    
    // Establecer el idioma inicial en el HTML
    document.documentElement.lang = currentLanguage;
    
    // Inicializar los botones de idioma
    initLanguageButtons();
    
    // Actualizar los textos
    updateTexts();
});
